<ion-view title="Mijn berichten" hide-Back-Button="true">
  <ion-nav-buttons side="left">
    <button menu-toggle="left" class="button button-icon icon ion-navicon"></button>
  </ion-nav-buttons>

  <ion-nav-buttons side="right">
    <i ng-if="loading" class="loadingheadericon icon ion-ios7-reloading"></i>
  </ion-nav-buttons>


   <ion-content class="has-header darkbackground">

     <ion-refresher on-refresh="refresh('user')"
                     refreshing-icon="ion-ios7-reloading" style="color:#aaa;"
                     ng-if="!noConnection">
      </ion-refresher>
    <ion-list class="pinboard">

   <div class="item item-divider"
    ng-repeat-start="(date, posts) in posts | orderBy:'date':true">
          {{posts.date | date:'EEEE d MMMM'}}
  </div>

      <div class="card privatecard"  ng-repeat="post in posts.posts track by $index">

               <div class="privatetime" ng-class="{'priklitemavatar': post.prikl_id>0}">
                 <span>{{post.post_date | date:'HH:mm'}}</span>
                 <div ng-if="post.post_public==1"><i class="icon ion-speakerphone"></i>  Openbaar</div>
                 <div ng-if="post.post_public==0"><i class="icon ion-locked"></i> Prive</div>
             </div>

            <div class="card-body">

              <i class="icon ion-ios7-lightbulb" ng-click="showPrikl(post.prikl_id)" ng-if="post.prikl_id>0"></i>


                    <div class= "text" ng-if="post.post_type == 'text'">
                        <span ng-style="{'font-size': countchars(post.post_text.length), 'line-height': countchars(post.post_text.length)}">{{post.post_text}}</span>
                     </div>
      
                    <div class= "photo" ng-if="post.post_type == 'pic'" data-ng-style="{'background-image':'url({{$root.server}}/posts/images/thumbs/{{post.post_pic}})'}"  ng-click="viewPhoto('/posts/images/',post.post_pic)">
                        <span ng-if="post.post_text != ''">{{post.post_text}}</span>
                    </div>

            </div>

            <div class="item tabs tabs-secondary tabs-icon-left tabs-dark">
             <a class="tab-item" ng-click="deletepost(post.idposts)"><i class="icon ion-ios7-trash-outline"></i> Verwijder</a>
              <a class="tab-item" ng-click="deletepost(post.idposts)"><i class="icon ion-ios7-trash-outline"></i> Verwijder</a>
           </div>

      </div>

     <div ng-repeat-end></div>
    </ion-list>

    
    <ion-infinite-scroll ng-if="!noMoreItemsAvailable && !noConnection" on-infinite="loadMore('user')" distance="10%"></ion-infinite-scroll>


 <div class="item item-divider" style="background-color:transparent;width:100%;color:white;border:0;text-align:center;font-weight:200;" ng-if="posts.length==0 && !loading && !noConnection"><span>Geen berichten</span></div>
  <div class="item item-divider" style="background-color:transparent;width:100%;color:white;border:0;text-align:center;" ng-if="noMoreItemsAvailable"><i class=" icon ion-checkmark" ></i></div>
  <div class="item item-divider darkbackground" ng-if="noConnection"><button class="button button-assertive button-block" ng-click="retry('user')">Probeer opnieuw</button></div>

  </ion-content>



</ion-view>

